process MuonAlignmentAlCaRecoHLT =  {

  untracked PSet configurationMetadata = {
    untracked string version = "$Revision: 1.3 $"
    untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/Alignment/CommonAlignmentProducer/test/testALCARECOMuAlHLTFilter.cfg,v $"
    untracked string annotation = "Muon AlCaReco using HLT filter"
  }

  // Input reco file
  source = PoolSource {

    untracked vstring fileNames = 
{"rfio:/castor/cern.ch/cms/store/mc/2007/9/30/CSA07-DrellYan_mumu_40-A2/0000/10D55A32-726F-DC11-A6BA-000423D94AA8.root"}
        }
    untracked PSet maxEvents = {untracked int32 input = 50}

# Messages
  include "FWCore/MessageLogger/data/MessageLogger.cfi"


module HltFilter = hltHighLevel  from 
"HLTrigger/HLTfilters/data/hltHighLevel.cfi"
replace HltFilter.HLTPaths = {
      "HLT1MuonIso","HLT1MuonNonIso" 
    }

 
sequence HLTAlCaRecoFilter = {
   HltFilter & 
   AlignmentMuons}

path p = {HLTAlCaRecoFilter}

        module AlignmentMuons = AlignmentMuonSelectorModule {
                InputTag src = muons 
                bool filter = true

                bool applyBasicCuts = true
                double ptMin      = 10. 
                double ptMax      = 9999.
                double etaMin     = -2.4
                double etaMax     =  2.4
                double phiMin     = -3.1416
                double phiMax     =  3.1416
                # Stand Alone Muons
                double nHitMinSA  =  0
                double nHitMaxSA  = 9999999
                double chi2nMaxSA = 9999999.
                # Global Muons
                double nHitMinGB  =  0
                double nHitMaxGB  = 9999999
                double chi2nMaxGB = 9999999.
                # Tracker Only
                double nHitMinTO  =  0
                double nHitMaxTO  = 9999999
                double chi2nMaxTO = 9999999.

                bool applyNHighestPt = false
                int32 nHighestPt = 2

                bool applyMultiplicityFilter = false
                int32 minMultiplicity = 1

  // copy best mass pair combination muons to result vector
  // Criteria: 
  // a) maxMassPair != minMassPair: the two highest pt muons with mass pair inside the given mass window
  // b) maxMassPair == minMassPair: the muon pair with mass pair closest to given mass value
                bool applyMassPairFilter = false
                double minMassPair = 0.
                double maxMassPair = 99999.

        }
       module out = PoolOutputModule {
                untracked vstring outputCommands = {
                "drop *" ,
                "keep *_AlignmentMuons_*_*",
                "keep *_muonCSCDigis_*_*",
                "keep *_muonDTDigis_*_*",
                "keep *_muonRPCDigis_*_*",
                "keep *_dt1DRecHits_*_HLT",
                "keep *_dt2DSegments_*_HLT",
                "keep *_dt4DSegments_*_HLT",
                "keep *_csc2DRecHits_*_HLT",
                "keep *_cscSegments_*_HLT",
                "keep *_rpcRecHits_*_HLT"
               }
         untracked PSet SelectEvents = {     
          vstring SelectEvents = { "p" }
             }  

    untracked PSet dataset ={      
      untracked string dataTier = "ALCARECO"
    }

                untracked string fileName ="AlCaReco.root"
        }

    endpath e ={ out }


}


