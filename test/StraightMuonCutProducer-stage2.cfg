process stage1 = {
    source = PoolSource {
	untracked vstring fileNames = {"file:///NOBACKUP/work/samples/ideal_1_5_4/ideal_0.root"}
    }
    untracked PSet maxEvents = {untracked int32 input = 1000}

    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
    include "TrackingTools/TrackRefitter/data/TracksToTrajectories.cff"
    include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilderWithoutRefit.cfi"
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "CondCore/DBCommon/data/CondDBCommon.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    include "Geometry/CSCGeometry/data/cscGeometry.cfi"
    include "Geometry/RPCGeometry/data/rpcGeometry.cfi"

    service = TFileService {string fileName = "stage2.root"}

    include "stage2.cff"
    module StraightMuonCutProducer = StraightMuonCutProducer {
	uint32 stage = 2

	double cut = 3.
	using StraightMuonCutStage2Params

	InputTag muonInput = ALCARECOMuAlZMuMu:SelectedMuons
	PSet TrackerTrackTransformer = {
	    string Fitter = "KFFitterForRefitInsideOut"
	    string Smoother = "KFSmootherForRefitInsideOut"
	    string Propagator = "SmartPropagatorAnyOpposite"
	    string TrackerRecHitBuilder = "WithoutRefit"
	    string MuonRecHitBuilder = "MuonRecHitBuilder"
	    string RefitDirection = "insideOut"
	    bool RefitRPCHits = false
	}
	string muonPropagator = "SmartPropagatorAnyOpposite"
    }

    module EventContentAnalyzer = EventContentAnalyzer {}

    path p = {StraightMuonCutProducer, EventContentAnalyzer}
}
